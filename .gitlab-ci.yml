stages:
  - test
  - report
test-execution:  
  stage: test
  tags:
    - aws-gitlab-runner
  image: maven:3.8-openjdk-8
  script:
#    - mvn clean
#    - mvn test
    - cd /etc/apache-maven-3.8.4/bin/
    - (./mvn clean)
    - (./mvn test -Dcucumber.filter.tags="@env" -Dbackend="3.133.195.200" -Dkeycloak="3.133.195.200" -Dplatform=”3.133.195.200” -Dcucumber.options="--plugin html:target/cucumber.html")
    - (./mvn test -Dcucumber.filter.tags="@smoke" -Dbackend="3.133.195.200" -Dkeycloak="3.133.195.200" -Dplatform=”3.133.195.200” -Dcucumber.options="--plugin html:target/cucumber.html")

# test-report:  
#   stage: report
#   artifacts:
#     name: "E2e_Report"
#     paths:
#     - target/cucumber.html
#     expire_in: 1 day
